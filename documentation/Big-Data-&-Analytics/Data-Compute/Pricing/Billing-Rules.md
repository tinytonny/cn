# 计费规则

数据计算服务目前支持一种计费类型：
 * 按量计费

## 存储计费

用户每个月在数据计算服务上将享受前500GB数据免费存储的服务。超出部分的数据表等数据，会按照其数据容量的大小进行计费，计费周期是：小时。
具体计费公式为：每小时存储费用 = 存储容量 * 存储价格，价格如下：

<table>
  <tr>
    <th width=10%>计费类型</th>
    <th width=35%>价格</th>
    <th width="30%">说明</th>
    <th width="25%">辅助举例</th>
  </tr>
  <tr>
    <td bgcolor=#eeeeee> 按实际存储量及时间周期付费 </td>
    <td> 0GB~100GB：0.0192元/GB/天</br>
100GB~1TB：0.0096元/GB/天(5折)</br>
1TB~10TB：0.0084元/GB/天(4.375折)</br>
10TB~100TB：0.0072元/GB/天(3.75折)</br>
100TB~1PB：0.006元/GB/天(3.125折)</br>
1PB以上：请通过工单联系我们  </td>
    <td> 1）包括表(Table)和文件(File)等，按照其数据容量的大小进行阶梯计费，计费周期是：天。</br>
2）以小时级别采集当前的存储使用情况，计算用户当天的存储平均值再乘以单价。</br>
3）如果实际存储量小于512MB时，dcs将收取这个项目0.01元/天的费用  </td>
    <td>如果用户的存储为50TB，则每天收取的费用为：
  100GB*0.0192元/GB/天
  +900GB*0.0096元/GB/天
  +9216GB*0.0084元/GB/天
  +40960GB*0.0072元/GB/天
  =382.8元/天  </td>
  </tr>
</table>



说明：
账单出账周期通常为每小时一次。例如00:00-01:00的账单一般会在01:00生成。
具体以系统出账时间为准，账单生成后会自动从您的账户余额中扣除费用以结算账单。

举例：
用户于00:00在数据计算服务上上传成功了1000GB的数据，将于01:00进行存储计费，账单金额为1000GB*1H*0.0008元/GB/H=8元。
如对数据进行删除，将按照具体存储的时间按小时精准计费，详细账单可在用户中心进行查看。


## 计算计费

### 共享计算资源

   如果选择使用共享计算资源，每一个查询任务的计费方法是通过计算实际处理数据大小，SQL复杂度两个指标进行计费。具体计费公式为：SQL计算费用=计算实际处理数据大小*SQL复杂度*SQL单价

| 计费项 | 价格 | 
| ------ | ------ | 
| SQL价格（元/GB） | 0.3元 | 

说明：
计算实际处理数据大小，指一个SQL查询任务实际扫描的数据量。</br>
(注：大部分SQL语句都会进行分区过滤和列筛选，所以一般情况下这个值会远小于原本数据大小)</br>
分区过滤：例如：SQL语句中含有where userid<"200000"，userid是分区列，则计费的数据量只会包括实际读取的分区，不会包括其他分区的数据。</br>
列筛选：例如：用户提交的SQL语句为select name from class; 只计算class表中name这一列的数据量，其他列不会参与计费。</br>
SQL = Join + Group By + Order By + Distinct + window函数 + max(insert into-1, 1)</br>
SQL复杂度计算：</br>
      SQL 关键字个数<= 3，复杂度为 1。</br>
      SQL 关键字个数<= 6，且>= 4，复杂度为 1.5。</br>
      SQL 关键字个数<= 19，且>= 7，复杂度为 2。</br>
      SQL 关键字个数>= 20，复杂度为 4。</br>
示例：</br>
用户输入的SQL语句是：</br>
SELECT DISTINCT total1 FROM</br>
(SELECT id1, COUNT(f1) AS total1 FROM in1 GROUP BYid1) tmp1 ORDER BY total1 DESC LIMIT 100;</br>
其中，SQL关键字个数是4，而SQL复杂度是1.5，若用户实际扫描数据为100GB，则所需费用=100*1.5*0.3=45元。</br>
账单出账时间在计算任务结束后的首个出账周期内，最长不超过12个小时。</br>
在计算任务成功结束后，系统会统计该计算任务读取的数据量和SQL复杂度，账单生成后会自动从您的账户余额中扣除费用以结算账单。没有成功的计算任务，业务错误，正常收费；资源级错误，不收费。

### 预留计算资源(如需开通，请与客服联系)

用户将业务在数据计算服务上运行稳定时，建议采取预留计算资源的使用方式，这将节省更多成本。
具体计费公式为：预留计算资源的费用=租用时长*配置节点个数*单价。价格如下：

| 节点配置 | CPU（核） |  内存（GB） | 单价（元/节点/日） |  
| ------ | ------ | ------ | ------ | 
| 一般通用型 | 1 | 4 | 5 |
| 大内存型 | 1 | 8 | 8 |

数据计算服务的计算资源可包日/包月购买，按季度或按年购买的可联系客服享受更高优惠。

用户需根据实际使用需求，选定租用时长、节点配置类型及个数，购买后立即扣费。
说明：包日，以24H为划分，生效时间为：购买时间点，24H后到期。
包月，以自然月为划分，如生效日期为1月15日，购买一个月，则有效期到2月15日；
          特殊情况，如生效日期为1月31日，到期为2月28日或29日。

对使用中的数据计算服务的计算资源可进行续期和扩容操作。

续期即同样的规格，延长有效期。扩容即在有效期内，增加同等配置的节点个数。

## 下载计费

用户从外网下载数据，按照下载的数据大小进行计费。
计费公式为：一次外网下载费用 = 下载数据量 * 下载价格
其中，具体价格如下：

| 计费项 | 价格 | 
| ------ | ------ | 
| 外网下载价格（元/GB） | 0.8元 | 
