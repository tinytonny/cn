# 僵尸主机的隔离防护和安全建议

**僵尸主机概念**：由于云主机对公网开放的服务可能存在安全漏洞，导致被黑客利用窃取主机的控制权或者植入木马，进一步利用该主机发动网络攻击。僵尸主机也有“肉鸡”之称。

**京东云隔离机制**：如果发现主机持续对外进行网络攻击，京东云安全防护系统将对主机执行网络隔离，这会导致用户无法通过公网IP访问云主机，主机无法与DHCP通信而获取不到内网IP地址等网络异常现象。当用户通过重置系统（控制台可操作）或者清理木马（VNC可操作），达成清除攻击行为的目标后，用户需要联系京东云客服协助解除网络隔离。

**注意**：

（1）解除隔离后，主机可能会由于无法获取内网IP仍然无法连接，用户需要重启网卡（VNC可操作）或者重启主机（控制台和VNC均可操作）来重新连接到DHCP获取内网IP。

（2）部分应用漏洞可以形成反射放大攻击，也会被安全防护系统识别隔离，如Memcached UDP放大攻击，NTP Monlist漏洞放大攻击等。

**常见的安全漏洞**：主机登录或者应用弱口令/空口令、系统漏洞、应用漏洞、web漏洞、语言运行环境漏洞。这些漏洞为黑客提供了入侵的前提条件。

**常规排查方法**：是否存在远程管理弱口令；是否对外开放了不安全配置的服务；是否存在异常文件和进程。

**安全建议**：对主机上重要文件进行备份；重新安装操作系统部署服务；增强密码复杂度，不使用易被猜测到的密码；开启安全组策略，只开放22、3389、80、443等必须端口；定期更新系统安全补丁；定期备份重要数据文件。

如需申请入侵分析溯源，请用户保留现场并提交技术工单。

**【备份数据和重置系统说明】**

为了达到完全清除恶意程序的目的，用户可以考虑备份数据后重置系统，再重新部署环境。

1.备份数据：您可以备份数据到云硬盘，重置系统会清空系统盘的数据，不会影响云硬盘内的数据；您也可以备份数据至您的本地。

2.重置系统：云主机关机后，在云主机的菜单选项中，您可以选择重置系统。

**【云主机安全基线说明】**

1.系统补丁管理：系统应定期更新安全补丁，当有新的高危、严重漏洞曝光时，应立即更新安全补丁；

2.系统服务配置：关闭不必要的服务，对于非公网服务（如SSH、MYSQL等）配置必须的访问控制策略；

3.文件权限配置：文件权限应适用最小权限原因，对于系统配置文件，在配置完成后应将其锁定；

4.认证授权配置：SSH应使用证书方式进行身份认证，并禁止root用户使用口令方式登录；并对用户进行适应的文件与目录访问权限配置；

5.口令策略配置：应配置适当的口令安全策略，参考如下：尝试次数（5）、最少不同字符（3）、最小密码长度（8）、最少大写字母（1）、最少小写字母（1）、最少数字（1）；

6.用户账号配置：删除或禁用系统中无用账户，并及时删除离职人员所使用的账户；

7.应用权限配置：应用程序应使用最小权限启动（至少非root用户启动）；

8.Web应用安全：Web应用应确保不存在文件上传、SQL注入、代码执行等安全漏洞；上述漏洞均可能造成系统被入侵；

9.如果您需要进一步更加有针对性的安全服务，您可以联系客服咨询或购买“京东云安全咨询服务”。

**【京东云安全组最佳实践】**

1.所有规则应符合最小权限原则；

2.对于Web类服务，默认情况下只允许对公网开放80或443端口；

3.严格禁止非对公网服务端口向公网开放（例如后台类服务、中间层服务等）；

4.严格禁止将数据库服务端口（例如mysql的3306端口等）配置为公网可访问；

5.严格禁止将远程管理服务端口（例如rpd的3389端口、ssh的22端口等）配置为公网可访问；

6.对于必须使用公网访问的管理后台类服务，应在入口规则中严格限制访问源IP，绝不允许对所有公网IP开放服务；

7.对于出口规则也应做适当访问控制。

**【良好的备份习惯】**

1.系统备份：定期抓取私有镜像作为还原点

2.数据备份：数据放置于云硬盘，定期做云硬盘快照
