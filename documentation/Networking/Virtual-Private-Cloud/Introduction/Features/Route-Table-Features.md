## **路由表**

### 基本概念

路由表是一系列路由规则的集合，用于控制私有网络中子网的流量流出方向。京东云共有两种类型的路由表：默认路由表和自定义路由表。随私有网络创建时自动创建的路由表为默认路由表，用户主动创建的路由表为自定义路由表。每个子网都必须关联一张路由表且只能关联一张路由表，每张路由表可以关联多个子网。

路由表由一系列路由策略组成，路由策略由路由的目的端、下一跳类型和下一跳地址组成，下一跳的类型支持的选项为：Internet、云主机，其中Internet用于公网访问，通过公网IP进行Internet通信的实例必须配置该条路由，云主机可作为公网网关使用，详见访问Internet。



### **默认路由表**

随私有网络创建时自动创建的路由表为默认路由表，默认路由表占用路由表的1个配额。默认路由表默认有两条路由策略：

1.用于VPC内网访问的Local规则；

2.用于Internet访问的Internet规则；

默认路由表不可删除。

默认路由表的路由策略可编辑、可增加、可删除，默认的两条路由策略不可删除，Local规则不可编辑。



### 自定义路由表

由用户主动创建的路由表为自定义路由表。自定义路由表默认有一条路由策略：用于VPC内网访问的Local规则。

已关联子网的自定义路由表不可删除。

自定义路由表的路由策略可编辑、可增加、可删除，默认的Local路由策略不可编辑、不可删除。



### **关联路由表**

每张路由表可以关联同一个VPC中的多个子网，每个子网能关联且只能关联一张路由表。您可以在子网侧更改关联的路由表，也能在路由表侧更改关联子网。



### 路由策略

路由策略用来控制子网中数据包的路由途径。分为默认路由策略和自定义路由策略两种，每条路由策略包含三个参数：

- 目的端：目的网段描述（仅支持网段格式，如果希望目的端为单个 IP，可设置掩码为`32`（如：`192.168.10.10/32`），目的端若为路由表所在VPC内的网段时，则该条路由策略将被Local规则覆盖，数据包将按Local规则进行路由。
- 下一跳类型：VPC的数据包出口。下一跳类型支持“Internet”、“云主机”等类型。
- 下一跳：指定具体跳转至的路由下一跳地址。

> 备注： 所有路由表均包含一条默认 Local 路由策略，表示私有网络内网互通。其路由规则为 [ Local，Local，Local ]，该路由规则不可修改、不可删除。



### **路由策略优先级**

当路由表中存在多条路由策略时，路由优先级由高至低分别为：

- 私有网络内流量：私有网络内流量最优先匹配；
- 精确路由：非私有网络内流量根据最精确的路由策略进行匹配；

例如：私有网络内一云主机绑定了弹性 IP，同时又在关联了 NAT 网关的子网内（路由表中设置了该子网访问 Internet 流量的下一跳是 NAT 网关），那么该云主机访问 Internet 的流量会全部通过 NAT 网关实现，因为最精确路由的优先级高于公网 IP。



### **计费方式**

路由表完全免费。 
