#  Post object
PostObject使用HTML表单上传文件到指定bucket。

基于浏览器利用HTTP POST直传文件到对象存储的Bucket中，可以降低延迟。Post Object的消息实体通过多重表单格式（multipart/form-data）编码，在Put Object操
作中参数通过HTTP请求头传递，在Post操作中参数则作为消息实体中的表单域传递。此接口兼容S3,仅支持OSS的兼容S3服务域名（<bucket>.s3.<region>.jcloudcs.com）
，[参见服务器域名](../../API-Reference-S3-Compatible/Regions-And-Endpoints.md)。

请求语法
```
POST / HTTP/1.1
Host: <bucket>.s3.<region>.jcloudcs.com
Content-Length: length
Content-Type: multipart/form-data; boundary=your_boundary
 
--your_boundary
Content-Disposition: form-data; name="key"
 
object_key
--your_boundary
Content-Disposition: form-data; name="X-Amz-Credential"
 
<your accessKey>/<date>/<region>/s3/aws4_request
--your_boundary
Content-Disposition: form-data; name="X-Amz-Algorithm"
 
AWS4-HMAC-SHA256
--your_boundary
Content-Disposition: form-data; name="X-Amz-Date"
 
date
--your_boundary 
Content-Disposition: form-data; name="Policy"
 
base64Encoded_policy
--your_boundary
Content-Disposition: form-data; name="X-Amz-Signature"
 
signature
--your_boundary
Content-Disposition: form-data; name="file"; filename=<filename>
Content-Type: content_type
 
file_content
--your_boundary
Content-Disposition: form-data; name="submit"
Upload to OSS
--your_boundary--
```
Header特别提示:

<table><thead><tr class="firstRow"><td valign="top" style="border:solid #DDDDDD 1px;background:#F0F0F0;padding:7px 15px 7px 10px"><p style="text-align:left"><span style="color: rgb(0, 0, 0);"><strong><span style="color: rgb(0, 0, 0); font-size: 16px; font-family: 宋体;">名称</span></strong></span></p></td><td valign="top" style="border:solid #DDDDDD 1px;border-left:none;background:#F0F0F0;padding:7px 15px 7px 10px"><p style="text-align:left"><span style="color: rgb(0, 0, 0);"><strong><span style="font-size: 16px; font-family: 宋体;">描述</span></strong></span></p></td><td valign="top" style="border:solid #DDDDDD 1px;border-left:none;background:#F0F0F0;padding:7px 15px 7px 10px"><p style="text-align:left"><span style="color: rgb(0, 0, 0);"><strong><span style="font-size: 16px; font-family: 宋体;">必须</span></strong></span></p></td></tr></thead><tbody><tr><td valign="top" style="border:solid #DDDDDD 1px;border-top:none;padding:7px 10px 7px 10px"><p>Content-Type</p></td><td valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>标准的http header，但类型必须为multipart/form-data，并指定boundary<br/>例如：Content-Type: multipart/form-data; &nbsp; boundary=your_boundary</p></td><td valign="top" style="border-top:none;border-left:none;border-bottom:solid #DDDDDD 1px;border-right:solid #DDDDDD 1px;padding:7px 10px 7px 10px"><p>是</p></td></tr></tbody></table><p><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;">&nbsp;<br/></span></p><p><strong><span style=";font-family:宋体;color:#333333">表单域</span></strong></p><table width="582"><thead><tr class="firstRow"><td width="114" valign="top" style="border: 1px solid rgb(221, 221, 221); background: rgb(240, 240, 240); padding: 7px 15px 7px 10px;"><p style="text-align:left"><strong><span style=";font-family:宋体;color:black">名称</span></strong></p></td><td width="75" valign="top" style="border-top: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-image: initial; border-left: none; background: rgb(240, 240, 240); padding: 7px 15px 7px 10px;"><p style="text-align:left"><strong><span style=";font-family:宋体;color:black">类型</span></strong></p></td><td width="330" valign="top" style="border-top: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-image: initial; border-left: none; background: rgb(240, 240, 240); padding: 7px 15px 7px 10px;"><p style="text-align:left"><strong><span style=";font-family:宋体;color:black">描述</span></strong></p></td><td width="62" valign="top" style="border-top: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-image: initial; border-left: none; background: rgb(240, 240, 240); padding: 7px 15px 7px 10px;"><p style="text-align:left"><strong><span style=";font-family:宋体;color:black">必须</span></strong></p></td></tr></thead><tbody><tr><td width="114" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>Cache-Control</p></td><td width="75" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>字符串</p></td><td width="330" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>标准的http header，参考PutObject，将记为object元数据信息<br/>默认值：无</p></td><td width="62" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>否</p></td></tr><tr><td width="114" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>Content-Type</p></td><td width="75" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>字符串</p></td><td width="330" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>标准的http header，参考PutObject，将记为object元数据信息<br/>默认值：无</p></td><td width="62" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>否</p></td></tr><tr><td width="114" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>Content-Disposition</p></td><td width="75" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>字符串</p></td><td width="330" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>标准的http header，参考PutObject，将记为object元数据信息<br/>默认值：无</p></td><td width="62" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>否</p></td></tr><tr><td width="114" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p style="text-align:left"><span style=";font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333">Content-Encoding</span></p></td><td width="75" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>字符串</p></td><td width="330" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>标准的http header，参考PutObject，将记为object元数据信息<br/>默认值：无</p></td><td width="62" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>否</p></td></tr><tr><td width="114" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>Expires</p></td><td width="75" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>字符串</p></td><td width="330" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>标准的http header，参考PutObject，将记为object元数据信息<br/>默认值：无</p></td><td width="62" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>否</p></td></tr><tr><td width="114" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>key</p></td><td width="75" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>字符串</p></td><td width="330" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>上传的object名字。<br/>支持变量${filename}（仅支持变量${filename}），例如指定key为bucket/${filename}，此时您上传了一个名为test.jpg的图片，那么oss保存的key为：bucket/test.jpg<br/>默认值：无</p></td><td width="62" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>是</p></td></tr><tr><td valign="top" colspan="1" rowspan="1" style="border-left-color: rgb(221, 221, 221); border-left-width: 1px; border-top-color: rgb(221, 221, 221); border-top-width: 1px;">policy</td><td valign="top" colspan="1" rowspan="1" style="border-left-color: rgb(221, 221, 221); border-left-width: 1px; border-top-color: rgb(221, 221, 221); border-top-width: 1px;">字符串</td><td valign="top" colspan="1" rowspan="1" style="border-left-color: rgb(221, 221, 221); border-left-width: 1px; border-top-color: rgb(221, 221, 221); border-top-width: 1px;">用于限制本次请求<br/>为经过UTF-8编码和Base64编码的JSON<br/>默认值：无</td><td valign="top" colspan="1" rowspan="1" style="border-left-color: rgb(221, 221, 221); border-left-width: 1px; border-top-color: rgb(221, 221, 221); border-top-width: 1px;">对于需要签名的请求来说是必须的</td></tr><tr><td width="114" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>success_action_redirect</p></td><td width="75" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>字符串</p></td><td width="330" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>当上传成功时client跳转地址<br/>如果success_action_redirect没有被指定，或者指定了但是OSS没有解析成功，那么OSS将按照success_action_status的设置进行返回（默认返回204）<br/>如果上传文件失败，那么OSS将会返回error并不做跳转<br/>默认值：无</p></td><td width="62" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>否</p></td></tr><tr><td width="114" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>success_action_status</p></td><td width="75" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>数值</p></td><td width="330" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>指定了上传文件成功时返回的状态码，前提是success_action_redirect 没有被指定<br/>如果值为200或204，OSS返回内容为空<br/>如果值为201，则返回的状态码为201，http body 内容为xml格式的object相关信息<br/>默认值：204<br/>有效值：200，201，204（默认）</p></td><td width="62" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>否</p></td></tr><tr><td width="114" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>x-amz-algorithm</p></td><td width="75" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>字符串</p></td><td width="330" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>签名算法，值为：AWS4-HMAC-SHA256<br/>默认值：无</p><p>仅支持AWS4-HMAC-SHA256</p></td><td width="62" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>对于需要签名的请求来说是必须的</p></td></tr><tr><td width="114" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>x-amz-credential</p></td><td width="75" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>字符串</p></td><td width="330" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>如果使用S3 API，则格式为：&lt;your-access-key-id&gt;/&lt;date&gt;/&lt;region&gt;/s3/aws4_request<br/> &nbsp;例子：AKIAIOSFODNN7EXAMPLEYYYYYYYYYYYY/20180601/cn-north-1/s3/aws4_request<br/> &nbsp; 默认值：无</p></td><td width="62" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>对于需要签名的请求来说是必须的</p></td></tr><tr><td width="114" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>x-amz-date</p></td><td width="75" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>字符串</p></td><td width="330" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>ISO8601时间格式，例如：20180601T000000Z</p><p>&nbsp;policy中x-amz-date属性的值应该与它相同</p><p>注意，此时计算签名的时间为20180601<br/>默认值：无</p></td><td width="62" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>对于需要签名的请求来说是必须的</p></td></tr><tr><td width="114" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>x-amz-signature</p></td><td width="75" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>字符串</p></td><td width="330" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>签名字符串<br/>默认值：无</p></td><td width="62" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>对于需要签名的请求来说是必须的</p></td></tr><tr><td width="114" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>x-amz-storage-class</p></td><td width="75" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>字符串</p></td><td width="330" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>Object的存储类型<br/> &nbsp;默认值：STANDARD（标准存储）<br/> &nbsp;有效值：STANDARD（标准存储）和REDUCED_REDUNDANCY（低冗余存储）<span style=";font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333"><br/> &nbsp; <br/> &nbsp; </span></p></td><td width="62" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>否</p></td></tr><tr><td width="114" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>file</p></td><td width="75" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>字符串</p></td><td width="330" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>文件或文本内容<br/>此属性必须放在form最后，否则file后的属性将被忽略<br/>不支持多个文件同时上传<br/>默认值：无</p></td><td width="62" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px;"><p>是</p></td></tr></tbody></table><p>&nbsp;</p><p><strong><span style=";font-family:宋体;color:#333333">响应</span></strong></p><p><strong><span style=";font-family:宋体;color:#333333">响应元素（Response Elements）</span></strong></p><p>当且仅当返回码为201时，有以下返回</p><table><thead><tr class="firstRow"><td width="116" valign="top" style="border: 1px solid rgb(221, 221, 221); background: rgb(240, 240, 240); padding: 7px 15px 7px 10px; word-break: break-all;"><p style="text-align:left"><strong><span style="font-size:16px;font-family:宋体;color:black">名称</span></strong></p></td><td width="55" valign="top" style="border-top: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-image: initial; border-left: none; background: rgb(240, 240, 240); padding: 1px;"><p style="text-align:left"><strong><span style="font-size:16px;font-family:宋体;color:black">类型</span></strong></p></td><td width="408" valign="top" style="border-top: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-image: initial; border-left: none; background: rgb(240, 240, 240); padding: 7px 15px 7px 10px; word-break: break-all;"><p style="text-align:left"><strong><span style="font-size:16px;font-family:宋体;color:black">描述&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></strong></p></td></tr></thead><tbody><tr><td width="116" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>PostResponse</p></td><td width="55" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 1px;"><p>容器</p></td><td width="408" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>object存储的bucket name<br/>子节点：Bucket，Key，Etag</p></td></tr><tr><td width="116" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>+Bucket</p></td><td width="55" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 1px;"><p>字符串</p></td><td width="408" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>object存储的bucket name<br/>父节点：PostResponse</p></td></tr><tr><td width="116" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>+Key</p></td><td width="55" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 1px;"><p>字符串</p></td><td width="408" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>object name<br/>父节点：PostResponse</p></td></tr><tr><td width="116" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>+Etag</p></td><td width="55" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 1px;"><p>字符串</p></td><td width="408" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>在每个Object生成的时候被创建，Post请求创建的Object，可以用于检查该Object内容是否发生变化<br/>父节点：PostResponse</p></td></tr><tr><td width="116" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>+Location</p></td><td width="55" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 1px;"><p>字符串</p></td><td width="408" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>新创建Object的URL,注意：location中的key将进行urlencode<br/>父节点：PostResponse</p></td></tr></tbody></table><p><strong><span style=";font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;background:white">&nbsp;</span></strong></p><p><strong><span style=";font-family:宋体;color:#333333">细节分析：</span></strong></p><p>1.&nbsp;&nbsp;&nbsp; 进行Post操作要求对bucket有写权限，如果bucket为public-read-write，可以不上传签名信息，否则要求对该操作进行签名验证，如果post form中没有提供足够的签名请求所需要的属性，那么本次请求将被视为匿名请求。</p><p>2.&nbsp;&nbsp;&nbsp; 如果POST请求中包含Header签名信息或URL签名信息，OSS不会对它们做检查。(即PostObject只以Form中为准)</p><p>3.&nbsp;&nbsp;&nbsp; form中缺少必要属性。例如：缺少key， 返回400&nbsp;InvalidArgument ; 缺少file，返回400&nbsp;IncorrectNumberOfFilesInPostRequest</p><p>4.&nbsp;&nbsp;&nbsp; form 属性不区分大小写，例如：x-amz-signature 和 X-Amz-Signature等价，但是表单域的值为大小写敏感的。</p><p>5.&nbsp;&nbsp;&nbsp; form 大小限制20K（不包含file大小）,否则返回400，&nbsp;MaxPostPreDataLengthExceeded</p><p>6.&nbsp;&nbsp;&nbsp; Post请求的body总长度不允许超过5G。若文件长度过大，会返回错误码：EntityTooLarge。</p><p>7.&nbsp;&nbsp;&nbsp; key的value如果指定变量（仅支持变量${filename}），此时上传的文件名含有路径，即&quot;/&quot; 或&quot;\&quot;，那么${filename}将会被替换为最后一个&quot;/&quot; 或&quot;\&quot;之后的部分。例如：上传的文件名为：C:\Program Files\directory1\file.txt，那么key属性中${filename}将会被替换为file.txt</p><p>8.&nbsp;&nbsp;&nbsp; OSS不识别的属性将会被忽略，但是form里面的属性也需要在policy里面进行限制，否则将返回403 AccessDenied。</p><p>9.&nbsp;&nbsp;&nbsp; 如果用户表单域中指定Content-MD5（请求头中的MD5不会被验证），OSS会计算body的Content-MD5并检查一致性，如果不一致，将返回BadDigest错误码。</p><p>10.&nbsp; 当form 中包含success_action_redirect时，跳转目标地址为：url + ?bucket=&lt;yourBucket&gt;&amp;key=&lt;yourKey&gt;&amp;ETag=etag.此处query部分将进行urlencode</p><p>11.&nbsp; 表单和policy必须使用UTF-8编码，policy为经过UTF-8编码和base64编码的JSON。</p><p>12.&nbsp; 由于目前没有版本管理，如果用户上传同名文件将会被覆盖。</p><p style="margin-top:auto;margin-bottom: auto;text-align:left;background:white"><strong><span style=";font-family:宋体;color:#333333">示例：</span></strong></p><p style="margin-top:auto;margin-bottom: auto;text-align:left;background:white"><strong><span style=";font-family:宋体;color:#333333">请求示例：</span></strong></p><pre class="brush:js;toolbar:false">POST&nbsp;/&nbsp;HTTP/1.1<br/>Host:&nbsp;testBucket.s3.&nbsp;cn-north-1.jcloudcs.com<br/>Content-Length:&nbsp;length<br/>Content-Type:&nbsp;multipart/form-data;&nbsp;boundary=123456789000<br/>--123456789000<br/>Content-Disposition:&nbsp;form-data;&nbsp;name=&quot;key&quot;<br/>test.txt<br/>--123456789000<br/>Content-Disposition:&nbsp;form-data;&nbsp;name=&quot;X-Amz-Credential&quot;<br/>AKIAIOSFODNN7EXAMPLEYYYYYYYYYYYY/20180601/cn-north-1/s3/aws4_request<br/>--123456789000<br/>Content-Disposition:&nbsp;form-data;&nbsp;name=&quot;X-Amz-Algorithm&quot;<br/>AWS4-HMAC-SHA256<br/>--123456789000<br/>Content-Disposition:&nbsp;form-data;&nbsp;name=&quot;X-Amz-Date&quot;<br/>20180601T000000Z<br/>--123456789000<br/>Content-Disposition:&nbsp;form-data;&nbsp;name=&quot;Policy&quot;<br/>eyJjb25kaXRpb25zIjpbeyJidWNrZXQiOiJ5b3VoZS10ZXN0In0sWyJzdGFydHMtd2l0aCIsIiRrZXkiLCJwb3N0LyJdLHsic3VjY2Vzc19hY3Rpb25fc3RhdHVzIjoiMjAxIn0seyJ4LWFtei1jcmVkZW50aWFsIjoiQUtJQUkyTUtVS0ZFUjRMNEJaNFEvMjAxODA3MTUvdXMtd2VzdC0xL3MzL2F3czRfcmVxdWVzdCJ9LHsieC1hbXotYWxnb3JpdGhtIjoiQVdTNC1ITUFDLVNIQTI1NiJ9LHsieC1hbXotZGF0ZSI6IjIwMTgwNzE1VDAzNTcyN1oifSxbImNvbnRlbnQtbGVuZ3RoLXJhbmdlIiwiMCIsIjkiXV0sImV4cGlyYXRpb24iOiIyMDE4LTA3LTMwVDEyOjAwOjAwLjAwMFoifQ==<br/>--123456789000<br/>Content-Disposition:&nbsp;form-data;&nbsp;name=&quot;X-Amz-Signature&quot;<br/>1b336b54bb3c7800f2137ee5b2d5d7ee676376800d388a17004ec2bee607897a<br/>--123456789000<br/>Content-Disposition:&nbsp;form-data;&nbsp;name=&quot;file&quot;;&nbsp;filename=”d:/&nbsp;test.txt”<br/>Content-Type:&nbsp;text/plain<br/>wrwe<br/>--123456789000<br/>Content-Disposition:&nbsp;form-data;&nbsp;name=&quot;submit&quot;<br/>Upload&nbsp;to&nbsp;OSS<br/>--123456789000--<br/></pre><p style="margin-top:auto;margin-bottom: auto;text-align:left;background:white"><span style=";font-family:宋体;color:#333333"></span><br/></p><p style="margin-top:auto;margin-bottom: auto;text-align:left;background:white"><br/></p><p style="margin-top:auto;margin-bottom: auto;text-align:left;background:white"><strong><span style=";font-family:宋体;color:#333333">返回示例：</span></strong></p><pre class="brush:js;toolbar:false">&lt;?xml&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;utf-8&quot;?&gt;<br/>&lt;PostResponse&gt;<br/>&nbsp;&nbsp;&lt;Bucket&gt;testBucket&lt;/Bucket&gt;<br/>&nbsp;&nbsp;&lt;Key&gt;test.txt&lt;/Key&gt;<br/>&nbsp;&nbsp;&lt;ETag&gt;&quot;1b6be8aac90401fe1cd5e4dd1c4b138f&quot;&lt;/ETag&gt;<br/>&nbsp;&nbsp;&lt;Location&gt;http://s3.cn-north-1.jcloudcs.com/testBucket/test.txt&lt;/Location&gt;<br/>&lt;/PostResponse&gt;<br/></pre><p style="margin-top:auto;margin-bottom: auto;text-align:left;background:white"><strong><span style=";font-family:宋体;color:#333333"></span></strong><br/></p><p><strong>Post Policy</strong><br/></p><p>Post请求的policy表单域用于验证请求的合法性，可以控制post请求的权限。 policy为一段经过UTF-8和base64编码的JSON文本，声明了Post请求必须满足的条件。虽然对于public-read-write的bucket上传时，post表单域为可选项，强烈建议您使用该域来限制Post请求。</p><p style="margin-top:auto;margin-bottom: auto;text-align:left;background:white">policy示例：</p><pre class="brush:js;toolbar:false">{&nbsp;&quot;expiration&quot;:&nbsp;&quot;2018-12-01T12:00:00.000Z&quot;,<br/>&nbsp;&nbsp;&quot;conditions&quot;:<br/>&nbsp;&nbsp;&nbsp;&nbsp;{&quot;bucket&quot;:&nbsp;&quot;myBucketName&quot;&nbsp;},<br/>&nbsp;&nbsp;&nbsp;&nbsp;[&quot;starts-with&quot;,&nbsp;&quot;$key&quot;,&nbsp;&quot;user/yuyu/&quot;],<br/>&nbsp;&nbsp;]<br/>}<br/></pre><p style="margin-top:auto;margin-bottom: auto;text-align:left;background:white"><br/></p><p>Post policy中必须包含expiration和condtions。</p><p style="margin-top:auto;margin-bottom: auto;text-align:left;background:white"><span style="color: rgb(0, 0, 0);"><strong>expiration</strong></span><br/></p><p>post请求policy的过期时间，时间格式为ISO8601 GMT。例如：”2018-06-01T12:00:00.000Z”，指定Post请求必须发生在2018年6月1日12点之前。</p><p style="margin-top:auto;margin-bottom: auto;text-align:left;background:white"><span style="color: rgb(0, 0, 0);"><strong>Conditions</strong></span><br/></p><p>Conditions是一个列表，可以用于指定Post请求的表单域的合法值。Policy中支持的conditions项见下表：</p><table><thead><tr class="firstRow"><td width="152" valign="top" style="border: 1px solid rgb(221, 221, 221); background: rgb(240, 240, 240); padding: 7px 15px 7px 10px; word-break: break-all;"><p style="text-align:left"><strong><span style=";font-family:宋体;color:black">名称</span></strong></p></td><td width="427" valign="top" style="border-top: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-image: initial; border-left: none; background: rgb(240, 240, 240); padding: 7px 15px 7px 10px;"><p style="text-align:left"><strong><span style=";font-family:宋体;color:black">描述</span></strong></p></td></tr></thead><tbody><tr><td width="152" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>bucket</p></td><td width="427" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>object上传到的bucket名字<br/>支持exact matching匹配类型</p></td></tr><tr><td width="152" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p style="text-align:left"><span style=";font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333">content-length-range</span></p></td><td width="427" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>上传内容的最大长度和最小长度限制<br/> &nbsp;支持content-length-range匹配类型</p></td></tr><tr><td width="152" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>Cache-Control</p><p>Content-Type</p><p>Content-Disposition</p><p>Content-Encoding</p><p>Expires</p></td><td width="427" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>标准的http header，参考PutObject<br/>支持exact matching和starts-with匹配类型</p></td></tr><tr><td width="152" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>key</p></td><td width="427" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>上传object的名字<br/>支持exact matching和starts-with匹配类型</p></td></tr><tr><td width="152" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>success_action_redirect</p></td><td width="427" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>上传成功后跳转的url地址<br/> &nbsp;支持exact matching和starts-with匹配类型</p></td></tr><tr><td width="152" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>success_action_status</p></td><td width="427" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>当上传文件成功但success_action_redirect没有被指定时返回的状态码<br/>支持exact matching匹配类型</p></td></tr><tr><td width="152" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>x-amz-algorithm</p></td><td width="427" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>签名算法，值为：AWS4-HMAC-SHA256码<br/>支持exact matching匹配类型</p></td></tr><tr><td width="152" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px; word-break: break-all;"><p>x-amz-credential</p></td><td width="427" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>如果使用S3 API，则格式为：&lt;your-access-key-id&gt;/&lt;date&gt;/&lt;region&gt;/s3/aws4_request<br/> &nbsp;例子：AKIAIOSFODNN7EXAMPLEYYYYYYYYYYYY/20180601/cn-north-1/s3/aws4_request<br/> &nbsp;支持exact matching匹配类型</p></td></tr><tr><td width="152" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px; word-break: break-all;"><p>x-amz-date</p></td><td width="427" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>ISO8601时间格式，例如：20180601T000000Z<br/>注意，此时计算签名的时间为20180601<br/> &nbsp;支持exact matching匹配类型</p></td></tr><tr><td width="152" valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px;"><p>x-amz-storage-class</p></td><td width="427" valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>Object的存储类型，默认值是”STANDARD”（标准存储）。<br/> &nbsp;支持”STANDARD”（标准存储）和”REDUCED_REDUNDANCY”（低冗余存储）两种存储类型&nbsp;</p><p>支持exact matching匹配类型</p></td></tr></tbody></table><p><span style="color: rgb(0, 0, 0);">&nbsp;</span></p><p><span style="color: rgb(0, 0, 0);">Conditions匹配方式</span></p><table><thead><tr class="firstRow"><td valign="top" style="border:solid #DDDDDD 1px;background:#F0F0F0;padding:7px 15px 7px 10px"><p style="text-align:left"><strong><span style=";font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black">Condition </span></strong><strong><span style=";font-family:宋体;color:black">匹配方式</span></strong></p></td><td valign="top" style="border:solid #DDDDDD 1px;border-left:none;background:#F0F0F0;padding:7px 15px 7px 10px"><p style="text-align:left"><strong><span style=";font-family:宋体;color:black">描述</span></strong></p></td></tr></thead><tbody><tr><td valign="top" style="border:solid #DDDDDD 1px;border-top:none;padding:7px 10px 7px 10px"><p>精确匹配</p></td><td valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>form 属性必须准确匹配该值<br/>例如{&quot;bucket&quot;: &nbsp; &quot;example-bucket&quot;},则要求文件只能上传到名为&quot;example-bucket&quot;的bucket。<br/> &nbsp;另一种写法：[ &quot;eq&quot;, &quot;$bucket&quot;, &nbsp; &quot;example-bucket&quot; ]</p></td></tr><tr><td valign="top" style="border:solid #DDDDDD 1px;border-top:none;padding:7px 10px 7px 10px"><p>Starts With</p></td><td valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>form 属性必须以指定值为前缀, <br/>例如：[&quot;starts-with&quot;, &nbsp; &quot;$key&quot;, &quot;OSS/&quot;] 指定了上传的文件名必须以OSS/为前缀</p></td></tr><tr><td valign="top" style="border:solid #DDDDDD 1px;border-top:none;padding:7px 10px 7px 10px"><p>匹配任意值</p></td><td valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>用于允许指定form属性的值为任何内容, 使用Starts With 并赋值为空（””）<br/>例如：[&quot;starts-with&quot;, &nbsp; &quot;$success_action_redirect&quot;, &quot;&quot;] 允许form中success_action_redirect可以为任何值</p></td></tr><tr><td valign="top" style="border:solid #DDDDDD 1px;border-top:none;padding:7px 10px 7px 10px"><p>指定文件大小</p></td><td valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>只支持content-length，可以逗号分隔最小值和最大值<br/>例如[&quot;content-length-range&quot;, &nbsp; 1048579, 10485760],限制了上传内容大小为1M~10M</p></td></tr></tbody></table><p>&nbsp;</p><p><strong><span style=";font-family: 宋体;color:#333333;background:white">转义字符</span></strong></p><p>于在 Post policy 中 $ 表示变量，所以如果要描述 $，需要使用转义字符\$。除此之外，JSON 将对一些字符进行转义。下表描述了 Post policy 中需要进行转义的字符。</p><table><tbody><tr class="firstRow"><td valign="top" style="border:solid #DDDDDD 1px;background:#F2F2F2;padding:7px 10px 7px 10px"><p style="text-align:left"><strong><span style=";font-family:宋体;color:#333333">转义字符</span></strong></p></td><td valign="top" style="border:solid #DDDDDD 1px;border-left:none;background:#F2F2F2;padding:7px 10px 7px 10px"><p style="text-align:left"><strong><span style=";font-family:宋体;color:#333333">描述</span></strong></p></td></tr><tr><td valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px; word-break: break-all;"><p>\/</p></td><td valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p style="text-align:left">斜杠</p></td></tr><tr><td valign="top" style="border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-left: 1px solid rgb(221, 221, 221); border-image: initial; border-top: none; padding: 7px 10px; word-break: break-all;"><p>\</p></td><td valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>反斜杠</p></td></tr><tr><td valign="top" style="border:solid #DDDDDD 1px;border-top:none;padding:7px 10px 7px 10px"><p>\$</p></td><td valign="top" style="border-top:none;border-left:none;border-bottom:solid #DDDDDD 1px;border-right:solid #DDDDDD 1px;padding:7px 10px 7px 10px"><p>美元符</p></td></tr><tr><td valign="top" style="border:solid #DDDDDD 1px;border-top:none;padding:7px 10px 7px 10px"><p>\b</p></td><td valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>空格</p></td></tr><tr><td valign="top" style="border:solid #DDDDDD 1px;border-top:none;padding:7px 10px 7px 10px"><p>\f</p></td><td valign="top" style="border-top: none; border-left: none; border-bottom: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); padding: 7px 10px; word-break: break-all;"><p>换页</p></td></tr><tr><td valign="top" style="border:solid #DDDDDD 1px;border-top:none;padding:7px 10px 7px 10px"><p>\n</p></td><td valign="top" style="border-top:none;border-left:none;border-bottom:solid #DDDDDD 1px;border-right:solid #DDDDDD 1px;padding:7px 10px 7px 10px"><p>换行</p></td></tr><tr><td valign="top" style="border:solid #DDDDDD 1px;border-top:none;padding:7px 10px 7px 10px"><p>\r</p></td><td valign="top" style="border-top:none;border-left:none;border-bottom:solid #DDDDDD 1px;border-right:solid #DDDDDD 1px;padding:7px 10px 7px 10px"><p>回车</p></td></tr><tr><td valign="top" style="border:solid #DDDDDD 1px;border-top:none;padding:7px 10px 7px 10px"><p>\t</p></td><td valign="top" style="border-top:none;border-left:none;border-bottom:solid #DDDDDD 1px;border-right:solid #DDDDDD 1px;padding:7px 10px 7px 10px"><p>水平制表符</p></td></tr><tr><td valign="top" style="border:solid #DDDDDD 1px;border-top:none;padding:7px 10px 7px 10px"><p>\uxxxx</p></td><td valign="top" style="border-top:none;border-left:none;border-bottom:solid #DDDDDD 1px;border-right:solid #DDDDDD 1px;padding:7px 10px 7px 10px"><p>Unicode&nbsp;字符</p></td></tr></tbody></table><h3><span style="font-size: 16px;"><strong>Post policy细节分析</strong></span></h3><p>1.&nbsp;&nbsp;policy中expiration和condition元素是必须的，否则policy验证失败，算作匿名请求。</p><p>2.&nbsp;&nbsp;上传的form里面除了x-amz-signature, file, policy, x-ignore-*，其他属性必须要在policy中进行限制.否则将算作匿名访问</p><p>3.&nbsp; &nbsp;若policy 格式不符合规范，如输入无效的Condition Match Type等，都将当做匿名请求来处理。</p><p>4.&nbsp; &nbsp;policy conditions（除content-length-range）校验未通过或者form里面没有找到对应的属性都将算作匿名访问，content-length-range验证不通过会返回EntityTooLarge，EntityTooSmall</p><p style="margin-top:auto;margin-bottom: auto;margin-left:0;text-align:left"><span style=";font-family:&#39;Arial&#39;,&#39;sans-serif&#39;"><br/></span></p><h2>计算Signature</h2><p>对于需要验证的Post请求，HTML表单中必须包含policy和signature（X-Amz-Signature）信息。policy控制请求中那些值是允许的。计算signature的具体流程为：</p><p>1.&nbsp;&nbsp;创建一个&nbsp;UTF-8&nbsp;编码的&nbsp;policy。</p><p>2.&nbsp;&nbsp;将&nbsp;policy&nbsp;进行&nbsp;base64&nbsp;编码，该值将作为签名计算的StringToSign字段。</p><p>3.&nbsp;&nbsp;将第二步得到字符串和其他签名所需信息，如AccessKeySecret等使用HMAC-SHA256算法进行签名计算。</p><p>4.&nbsp; &nbsp;将最后的结果进行16进制编码。</p><p><span style=";font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;background:white"></span><br/></p><p style="margin-left:24px;text-align:left">&nbsp;</p><p><strong><span style=";font-family: 宋体;color:#333333;background:white">表单上传样例：</span></strong></p><p>以下例子提供了如何使用POST policy 和表单完成上传一个文件到OSS。</p><p><strong><span style=";font-family: 宋体;color:#333333;background:white">Policy样例</span></strong></p><pre class="brush:js;toolbar:false">{<br/>	&quot;expiration&quot;:&nbsp;&quot;&lt;expiration&gt;&nbsp;example:2018-08-30T12:00:00.000Z&quot;,<br/>	&quot;conditions&quot;:&nbsp;[<br/>		{&quot;bucket&quot;:&nbsp;&quot;&lt;your&nbsp;bucket&gt;&quot;},<br/>		[&quot;starts-with&quot;,&nbsp;&quot;$key&quot;,&nbsp;&quot;&lt;your&nbsp;objectKey&nbsp;prefix&gt;&quot;],&nbsp;<br/>		{&quot;Content-Type&quot;:&nbsp;&quot;&lt;type&gt;&nbsp;example:image/jpeg&quot;},&nbsp;<br/>		{&quot;X-Amz-Credential&quot;:&nbsp;&quot;&lt;your&nbsp;accessKey&gt;/&lt;date&gt;&nbsp;example:20180709/&lt;region&gt;/s3/aws4_request&quot;},&nbsp;<br/>		{&quot;X-Amz-Algorithm&quot;:&nbsp;&quot;AWS4-HMAC-SHA256&quot;},&nbsp;<br/>		{&quot;X-Amz-Date&quot;:&nbsp;&quot;&lt;date&gt;&nbsp;example:20180709T053727Z&quot;}<br/>	]<br/>}<br/></pre><p><strong><span style=";font-family: 宋体;color:#333333;background:white">form样例</span></strong></p><pre class="brush:js;toolbar:false">&lt;html&gt;<br/>&nbsp;&nbsp;&lt;head&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=UTF-8&quot;&nbsp;/&gt;<br/>&nbsp;&nbsp;&lt;/head&gt;<br/>&nbsp;&nbsp;&lt;body&gt;<br/><br/>&nbsp;&nbsp;&lt;form&nbsp;action=&quot;http://&lt;your&nbsp;bucket&gt;.s3.&lt;region&gt;.jcloudcs.com/&quot;&nbsp;method=&quot;post&quot;&nbsp;enctype=&quot;multipart/form-data&quot;&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Key&nbsp;to&nbsp;upload:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type=&quot;input&quot;&nbsp;&nbsp;name=&quot;key&quot;&nbsp;value=&quot;&lt;your&nbsp;objectKey&gt;&quot;&nbsp;/&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;Content-Type:&nbsp;<br/>	&lt;input&nbsp;type=&quot;input&quot;&nbsp;&nbsp;name=&quot;Content-Type&quot;&nbsp;value=&quot;&lt;type&gt;&nbsp;example:image/jpeg&quot;&nbsp;/&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type=&quot;text&quot;&nbsp;&nbsp;&nbsp;name=&quot;X-Amz-Credential&quot;&nbsp;value=&quot;&lt;your&nbsp;accessKey&gt;/&lt;date&gt;&nbsp;example:20180709/&lt;region&gt;/s3/aws4_request&quot;&nbsp;/&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type=&quot;text&quot;&nbsp;&nbsp;&nbsp;name=&quot;X-Amz-Algorithm&quot;&nbsp;value=&quot;AWS4-HMAC-SHA256&quot;&nbsp;/&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type=&quot;text&quot;&nbsp;&nbsp;&nbsp;name=&quot;X-Amz-Date&quot;&nbsp;value=&quot;&lt;date&gt;&nbsp;example:20180709T053727Z&quot;&nbsp;/&gt;<br/>	&lt;input&nbsp;type=&quot;hidden&quot;&nbsp;name=&quot;Policy&quot;&nbsp;value=&#39;&lt;base64&nbsp;policy&gt;&#39;&nbsp;/&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type=&quot;hidden&quot;&nbsp;name=&quot;X-Amz-Signature&quot;&nbsp;value=&quot;&lt;signature&gt;&quot;&nbsp;/&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;File:&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type=&quot;file&quot;&nbsp;&nbsp;&nbsp;name=&quot;file&quot;&nbsp;/&gt;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;The&nbsp;elements&nbsp;after&nbsp;this&nbsp;will&nbsp;be&nbsp;ignored&nbsp;--&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type=&quot;submit&quot;&nbsp;name=&quot;submit&quot;&nbsp;value=&quot;Upload&nbsp;to&nbsp;Amazon&nbsp;S3&quot;&nbsp;/&gt;<br/>&nbsp;&nbsp;&lt;/form&gt;<br/>&nbsp;&nbsp;<br/>&lt;/html&gt;<br/></pre><p><span style="font-family:宋体">&nbsp; </span>说明：您需要替换有效的bucket&nbsp;名称，dates, credential, policy, 和signature才能成功的上传文件到OSS。</p><p>&nbsp;</p>








